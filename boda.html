<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Asignación de Mesas — Lu y Gil</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <meta name="description" content="Busca tu mesa para la boda de Lu y Gil">
    <link rel="canonical" href="https://boda.luygil.com" />
    <style>
        :root{
            --bg1:#e8f4f8;
            --bg2:#f0f9f4;
            --accent:#2563eb;
            --secondary:#059669;
            --muted:#4b5563;
            --card:#ffffff;
            --card-shadow:rgba(37, 99, 235, 0.1);
        }
        * {
            box-sizing: border-box;
        }
        html,body{
            height:100vh;
            margin:0;
            font-family:Inter,system-ui,Arial,sans-serif;
            background:linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%);
            color:#1f2937;
            overflow-x:hidden;
        }
        .wrap{
            min-height:100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            padding:16px;
            width:100%;
        }
        header{
            width:100%;
            max-width:100%;
            text-align:center;
            margin-bottom:20px;
            padding:0 16px;
        }
        header h1{
            font-family:'Playfair Display', serif;
            margin:12px 0;
            font-size:clamp(24px, 6vw, 36px);
            color:var(--accent);
            font-weight:600;
        }
        header p{
            margin:0;
            color:var(--muted);
            font-size:clamp(14px, 3.5vw, 16px);
            line-height:1.4;
        }
        .card{
            background:var(--card);
            width:100%;
            max-width:100%;
            border-radius:16px;
            padding:clamp(16px, 4vw, 24px);
            box-shadow:0 8px 25px var(--card-shadow);
            margin-bottom:20px;
            flex:1;
            min-height:calc(100vh - 200px);
        }
        .search-section{
            text-align:center;
            width:100%;
            margin:0 auto;
        }
        .search-section > strong {
            font-size:clamp(18px, 4vw, 22px);
            color:var(--accent);
            display:block;
            margin-bottom:12px;
        }
        .search{
            display:flex;
            gap:8px;
            margin:16px 0;
            width:100%;
            max-width:500px;
            margin-left:auto;
            margin-right:auto;
        }
        input[type="search"]{
            flex:1;
            padding:16px 18px;
            border-radius:12px;
            border:2px solid #e5e7eb;
            font-size:clamp(16px, 4vw, 18px);
            background:#fafafa;
            transition:all 0.3s ease;
            min-height:56px;
        }
        input[type="search"]:focus{
            outline:none;
            border-color:var(--accent);
            background:#ffffff;
            box-shadow:0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        button{
            padding:16px 20px;
            border-radius:12px;
            border:0;
            background:linear-gradient(135deg,var(--accent) 0%,var(--secondary) 100%);
            color:#fff;
            font-weight:600;
            cursor:pointer;
            font-size:clamp(14px, 3.5vw, 16px);
            transition:transform 0.2s ease;
            min-height:56px;
            white-space:nowrap;
        }
        button:hover{
            transform:translateY(-1px);
        }
        button:active{
            transform:translateY(0);
        }
        .result{
            margin-top:20px;
            padding:20px;
            border-radius:12px;
            background:linear-gradient(135deg,#ffffff 0%,#f8fafc 100%);
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:16px;
            border:2px solid var(--bg1);
            flex-wrap:wrap;
        }
        .name{
            font-size:clamp(16px, 4vw, 20px);
            font-weight:600;
            color:var(--accent);
        }
        .mesa{
            background:linear-gradient(135deg,var(--secondary) 0%,#047857 100%);
            color:#ffffff;
            padding:12px 20px;
            border-radius:25px;
            font-weight:700;
            font-size:clamp(14px, 3.5vw, 16px);
            white-space:nowrap;
            box-shadow:0 4px 12px rgba(5, 150, 105, 0.3);
        }
        .note{
            font-size:clamp(12px, 3vw, 14px);
            color:var(--muted);
            margin-top:12px;
            line-height:1.4;
        }
        ul.suggestions{
            list-style:none;
            padding:0;
            margin:16px 0 0 0;
            max-height:300px;
            overflow:auto;
            width:100%;
        }
        ul.suggestions li{
            padding:16px;
            border-radius:10px;
            margin-bottom:8px;
            background:#ffffff;
            border:1px solid var(--bg1);
            cursor:pointer;
            font-size:clamp(14px, 3.5vw, 16px);
            transition:all 0.2s ease;
        }
        ul.suggestions li:hover{
            background:var(--bg1);
            border-color:var(--accent);
            transform:translateY(-1px);
        }
        footer{
            margin-top:16px;
            color:var(--muted);
            font-size:clamp(11px, 2.5vw, 13px);
            text-align:center;
            padding:16px;
        }
        
        /* Mobile optimizations */
        @media(max-width:640px){
            .wrap{
                padding:12px;
            }
            .search{
                flex-direction:column;
                gap:12px;
            }
            .search button{
                margin-top:0;
                width:100%;
            }
            .result{
                flex-direction:column;
                text-align:center;
                gap:12px;
            }
            .card{
                border-radius:12px;
                min-height:calc(100vh - 150px);
            }
            header{
                margin-bottom:16px;
            }
        }
        
        /* Very small screens */
        @media(max-width:380px){
            .wrap{
                padding:8px;
            }
            .card{
                padding:16px;
                border-radius:8px;
            }
        }
        
        /* Landscape phones */
        @media(max-height:500px) and (orientation:landscape){
            .card{
                min-height:auto;
            }
            .wrap{
                min-height:auto;
            }
        }
    </style>
</head>
<body>
    <div class="wrap">
        <header>
            <h1>Lu y Gil ♥</h1>
            <p>Busca tu nombre y encuentra tu mesa — Bienvenid@ a nuestra boda</p>
        </header>

        <div class="card">
            <div class="search-section">
                <strong>Encuentra tu mesa</strong>
                <div class="note">Escribe tu nombre para encontrar tu mesa asignada.</div>

                <div class="search">
                    <input id="search" type="search" placeholder="Escribe tu nombre (ej. Luisa)" autocomplete="off" />
                    <button id="btnBuscar" aria-label="Buscar">Buscar</button>
                </div>

                <div class="note">Consejo: escribe algunas letras para encontrar tu nombre. La búsqueda no distingue mayúsculas ni tildes.</div>
            </div>

            <div id="output" style="margin-top:14px" aria-live="polite"></div>
            <ul id="suggestions" class="suggestions" aria-live="polite"></ul>
        </div>

        <footer>Gracias por venir — Disfruten la noche</footer>
    </div>

    <script>
    (function(){
        const input = document.getElementById('search');
        const btn = document.getElementById('btnBuscar');
        const output = document.getElementById('output');
        const suggestions = document.getElementById('suggestions');
        
        // Datos actualizados desde el CSV
        const guestData = [
            {name: "Edgar Reynoso (Hijo)", mesa: "Mesa 1"},
            {name: "Natalia", mesa: "Mesa 1"},
            {name: "Luis Antonio", mesa: "Mesa 1"},
            {name: "Regina", mesa: "Mesa 1"},
            {name: "Sebastian Rojas", mesa: "Mesa 1"},
            {name: "Asali", mesa: "Mesa 1"},
            {name: "Antonio Silva", mesa: "Mesa 1"},
            {name: "Antonio Silva +1", mesa: "Mesa 1"},
            {name: "Enrique Ortega", mesa: "Mesa 2"},
            {name: "Andrea", mesa: "Mesa 2"},
            {name: "Gabriel Ortega", mesa: "Mesa 2"},
            {name: "Mayela Gonzalez", mesa: "Mesa 2"},
            {name: "Alberto", mesa: "Mesa 2"},
            {name: "Silvia Gonzalez", mesa: "Mesa 2"},
            {name: "Victor Amaro", mesa: "Mesa 2"},
            {name: "Gabriela Amaro", mesa: "Mesa 2"},
            {name: "Armando Gonzalez", mesa: "Mesa 2"},
            {name: "Armando Gonzalez (Hijo)", mesa: "Mesa 2"},
            {name: "Josue Gonzalez", mesa: "Mesa 2"},
            {name: "Jose Antonio Garcia Loyola", mesa: "Mesa 3"},
            {name: "Jose Antonio Garcia Loyola +1", mesa: "Mesa 3"},
            {name: "Fernando Del Villar", mesa: "Mesa 3"},
            {name: "Fernando Del Villar +1", mesa: "Mesa 3"},
            {name: "Mario Lazo", mesa: "Mesa 3"},
            {name: "David Jesus", mesa: "Mesa 3"},
            {name: "Juan Manuel Castañon", mesa: "Mesa 3"},
            {name: "Rosario Escobar", mesa: "Mesa 3"},
            {name: "Juan Antonio Silva", mesa: "Mesa 3"},
            {name: "Consuelo Espinoza", mesa: "Mesa 3"},
            {name: "Rafael Loret de Mola", mesa: "Mesa 3"},
            {name: "Danae Castañon", mesa: "Mesa 3"},
            {name: "Oralia Muzquiz", mesa: "Mesa 4"},
            {name: "Benjamin", mesa: "Mesa 4"},
            {name: "Paty Ruvalcaba", mesa: "Mesa 4"},
            {name: "Luis Rojas", mesa: "Mesa 4"},
            {name: "Claudia", mesa: "Mesa 4"},
            {name: "Alejandro Padilla", mesa: "Mesa 4"},
            {name: "Arturo Flores", mesa: "Mesa 4"},
            {name: "Adriana Morales", mesa: "Mesa 4"},
            {name: "Ramon", mesa: "Mesa 4"},
            {name: "Lucy Muzquiz", mesa: "Mesa 4"},
            {name: "Paty Palafox", mesa: "Mesa 4"},
            {name: "Luis Palafox", mesa: "Mesa 4"},
            {name: "Mario Díaz", mesa: "Mesa 5"},
            {name: "Luis Reyna", mesa: "Mesa 5"},
            {name: "Gissele Montemayor", mesa: "Mesa 5"},
            {name: "Sandily", mesa: "Mesa 5"},
            {name: "Sean", mesa: "Mesa 5"},
            {name: "José Molina", mesa: "Mesa 5"},
            {name: "Dominic", mesa: "Mesa 5"},
            {name: "Adolfo", mesa: "Mesa 5"},
            {name: "Caro", mesa: "Mesa 5"},
            {name: "Gina Montoya", mesa: "Mesa 6"},
            {name: "Angelica Montoya", mesa: "Mesa 6"},
            {name: "Mary Luz Lopez", mesa: "Mesa 6"},
            {name: "Maria Fernanda Marin", mesa: "Mesa 6"},
            {name: "Elsa Botero", mesa: "Mesa 6"},
            {name: "Estella Botero", mesa: "Mesa 6"},
            {name: "Melissa Nieto", mesa: "Mesa 6"},
            {name: "Maria Paula Nieto", mesa: "Mesa 6"},
            {name: "Jessica Nieto", mesa: "Mesa 6"},
            {name: "Horten Sordo", mesa: "Mesa 7"},
            {name: "Anselmo Alonso", mesa: "Mesa 7"},
            {name: "Guadalupe Andres", mesa: "Mesa 7"},
            {name: "Viviviana Cocimano", mesa: "Mesa 7"},
            {name: "Hector Scarinci", mesa: "Mesa 7"},
            {name: "Andrea Saldaña", mesa: "Mesa 7"},
            {name: "Laura Reynoso", mesa: "Mesa 7"},
            {name: "Edgar Reynoso", mesa: "Mesa 7"},
            {name: "Maria Leticia Gonzalez", mesa: "Mesa 7"},
            {name: "Lorenzo Silva", mesa: "Mesa 7"},
            {name: "Karol Rendon", mesa: "Mesa 8"},
            {name: "Diego Alejandro Aguilar", mesa: "Mesa 8"},
            {name: "Maria Alejandra Duque", mesa: "Mesa 8"},
            {name: "Manuela Calle", mesa: "Mesa 8"},
            {name: "Cristina Mendoza", mesa: "Mesa 8"},
            {name: "Maria Fernanda Rodriguez", mesa: "Mesa 8"},
            {name: "Nicolas Tarazona", mesa: "Mesa 8"},
            {name: "Patricio Saldaña", mesa: "Mesa 8"},
            {name: "Paola Alonso", mesa: "Mesa 9"},
            {name: "Sebastian de la Mora", mesa: "Mesa 9"},
            {name: "Cesar Rojas", mesa: "Mesa 9"},
            {name: "Xavier Viclhis", mesa: "Mesa 9"},
            {name: "Camila Murchio", mesa: "Mesa 9"},
            {name: "Alejandro Lugo", mesa: "Mesa 9"},
            {name: "Lucia Rosas", mesa: "Mesa 9"},
            {name: "Alex Moran (el nenuco)", mesa: "Mesa 9"},
            {name: "Daniela Alvarez", mesa: "Mesa 9"},
            {name: "Seymer Antonio", mesa: "Mesa 10"},
            {name: "Eugenia Leal", mesa: "Mesa 10"},
            {name: "James Murphree", mesa: "Mesa 10"},
            {name: "Sarah Murphree", mesa: "Mesa 10"},
            {name: "TJ Norris", mesa: "Mesa 10"},
            {name: "Jack Capombasis", mesa: "Mesa 10"},
            {name: "Hoda Parvin", mesa: "Mesa 10"},
            {name: "Shervin Beygi", mesa: "Mesa 10"},
            {name: "Santiago Harispuru", mesa: "Mesa 10"},
            {name: "Saf", mesa: "Mesa 10"},
            {name: "Patricio Silva", mesa: "Mesa 11"},
            {name: "Laura Romo", mesa: "Mesa 11"},
            {name: "Santiago Mendoza +1", mesa: "Mesa 11"},
            {name: "Santiago Mendoza", mesa: "Mesa 11"},
            {name: "Juan Miguel Alonso", mesa: "Mesa 11"},
            {name: "Gerry", mesa: "Mesa 11"},
            {name: "Gerry +1", mesa: "Mesa 11"},
            {name: "Daniela Lugo", mesa: "Mesa 11"},
            {name: "David Orozco", mesa: "Mesa 11"},
            {name: "Isabel Cristina Botero", mesa: "Mesa 12"},
            {name: "Nelson Lopez", mesa: "Mesa 12"},
            {name: "Arturo Araujo", mesa: "Mesa 12"},
            {name: "Myriam Lopez", mesa: "Mesa 12"},
            {name: "Yolanda Lopez", mesa: "Mesa 12"},
            {name: "Marcela Garcia", mesa: "Mesa 12"},
            {name: "Angela Garcia", mesa: "Mesa 12"},
            {name: "Carmen Lopez", mesa: "Mesa 12"},
            {name: "Pedro Nel Florez", mesa: "Mesa 12"},
            {name: "Carlos Hernandez", mesa: "Mesa 13"},
            {name: "Jimena Cruz", mesa: "Mesa 13"},
            {name: "Everardo Spengler", mesa: "Mesa 13"},
            {name: "Itzel", mesa: "Mesa 13"},
            {name: "Erick Yair", mesa: "Mesa 13"},
            {name: "Sarah Collazos", mesa: "Mesa 13"},
            {name: "Mauricio Leyva", mesa: "Mesa 13"},
            {name: "Anette Borboa", mesa: "Mesa 13"},
            {name: "Oscar Bravo", mesa: "Mesa 13"},
            {name: "Diego Patiño", mesa: "Mesa 14"},
            {name: "María Julia", mesa: "Mesa 14"},
            {name: "Rodrigo Canales", mesa: "Mesa 14"},
            {name: "Samantha", mesa: "Mesa 14"},
            {name: "Alejandro Mosqueda", mesa: "Mesa 14"},
            {name: "Almudena", mesa: "Mesa 14"},
            {name: "Daniel Johnstone", mesa: "Mesa 14"},
            {name: "Diego Villanueva", mesa: "Mesa 14"},
            {name: "Luis Oscar Espinsa", mesa: "Mesa 14"},
            {name: "Lau Silva", mesa: "Mesa 15"},
            {name: "Jimena Rodriguez", mesa: "Mesa 15"},
            {name: "Andrea Rodriguez", mesa: "Mesa 15"},
            {name: "Julia Orozco", mesa: "Mesa 15"},
            {name: "Sebastian Mariscal", mesa: "Mesa 15"},
            {name: "Berenice Hernandez", mesa: "Mesa 15"},
            {name: "Maria de los Angeles Alberdi", mesa: "Mesa 15"},
            {name: "Juan Carlos Gutierrez", mesa: "Mesa 15"},
            {name: "Luis David Bolaños", mesa: "Mesa 15"},
            {name: "Armando Barrera Alcantar", mesa: "Mesa 15"},
            {name: "Julia Frakenberger", mesa: "Mesa 15"},
            {name: "David Camhi", mesa: "Mesa 16"},
            {name: "Pamela Anderson", mesa: "Mesa 16"},
            {name: "Valerio Hernandez", mesa: "Mesa 16"},
            {name: "Luisa (Valerio +1)", mesa: "Mesa 16"},
            {name: "Jose Enrique de las Fuentes", mesa: "Mesa 16"},
            {name: "Jose Enrique de las Fuentes +1", mesa: "Mesa 16"},
            {name: "Damian Scarinci", mesa: "Mesa 16"},
            {name: "Mariana Priego", mesa: "Mesa 16"},
            {name: "Isaac Raful", mesa: "Mesa 16"},
            {name: "Den Amora", mesa: "Mesa 16"}
        ];

        // Normaliza acentos y mayúsculas para buscar
        function normalizeText(s){
            return s.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
        }

        // Preparar datos con keys normalizadas
        const guests = guestData.map(g => ({
            name: g.name,
            mesa: g.mesa,
            key: normalizeText(g.name)
        }));

        function findMatches(q){
            const s = normalizeText(q.trim());
            if(!s) return [];
            return guests.filter(g => g.key.includes(s));
        }

        function showResults(list, q){
            suggestions.innerHTML = '';
            output.innerHTML = '';
            if(!q || q.trim().length < 1) return;

            if(list.length === 0){
                output.innerHTML = '<div class="result"><div class="name">No se encontró el nombre</div><div class="mesa">—</div></div>';
                return;
            }

            // exact match by normalized key
            const exact = list.find(g => g.key === normalizeText(q));
            if(exact){
                output.innerHTML = renderFound(exact);
                return;
            }

            // si hay varias coincidencias, mostrar sugerencias
            list.slice(0,50).forEach(g=>{
                const li = document.createElement('li');
                li.textContent = g.name + ' • ' + g.mesa;
                li.onclick = ()=> { input.value = g.name; suggestions.innerHTML=''; output.innerHTML = renderFound(g); window.scrollTo({top:0,behavior:'smooth'}); };
                suggestions.appendChild(li);
            });

            output.innerHTML = '<div class="note">Se encontraron ' + list.length + ' coincidencias. Toca tu nombre para ver la mesa.</div>';
        }

        function renderFound(g){
            return '<div class="result"><div><div class="name">Hola, '+escapeHtml(g.name)+'</div><div class="note">Tu mesa asignada es:</div></div><div class="mesa">'+escapeHtml(g.mesa)+'</div></div>';
        }

        function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

        btn.addEventListener('click', ()=> {
            const q = input.value;
            const matches = findMatches(q);
            showResults(matches, q);
        });

        input.addEventListener('input', ()=> {
            const q = input.value;
            if(q.trim().length < 1) { suggestions.innerHTML=''; output.innerHTML=''; return; }
            const matches = findMatches(q);
            showResults(matches, q);
        });

        input.addEventListener('keydown', (e) => {
            if(e.key === 'Enter') btn.click();
        });

        function getParam(name){
            const params = new URLSearchParams(location.search);
            return params.get(name);
        }

        function checkQueryParam(){
            const q = getParam('name') || getParam('q');
            if(q){
                input.value = q;
                const matches = findMatches(q);
                showResults(matches, q);
            }
        }

        // Initialize
        checkQueryParam();